syntax = "proto3";

package babywear.v1;

option go_package = "github.com/kenji/baby-wear-translator/backend/gen/babywear/v1;babywearv1";

// 服の推薦を提供するサービス
service RecommenderService {
  // 生年月日・着せたい日・ショップ名から最適な服をおすすめする
  rpc GetRecommendation(GetRecommendationRequest) returns (GetRecommendationResponse) {}
}

message GetRecommendationRequest {
  // 生年月日 (YYYY-MM-DD)
  string birth_date = 1;

  // 着せたい日付 (YYYY-MM-DD)。省略した場合はサーバー側で今日の日付を使う
  optional string target_date = 2;

  // よく行くショップ名 (例: "uniqlo", "nishimatsuya", "akachan_honpo")。省略可
  optional string target_shop = 3;
}

message GetRecommendationResponse {
  // 計算された月齢（～ヶ月）
  int32 age_in_months = 1;

  // 月齢に応じた目安の服のサイズ (例: "60-70cm")
  string size = 2;

  // おすすめアイテムの一覧
  repeated RecommendedItem items = 3;
}

// 推薦された服の1アイテム
message RecommendedItem {
  // 汎用的な呼び名 (例: "カバーオール")
  string universal_name = 1;

  // よく行くショップでの呼び名 (例: "プレオール")
  string shop_specific_name = 2;

  // 他のショップでの呼び名 (ショップID -> 呼び名)
  map<string, string> other_shop_names = 3;
}
